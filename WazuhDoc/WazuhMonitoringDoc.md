# WazuhMonitoringDoc

**On Agent :**

The package for macOS is suitable for macOS Sierra or greater. The macOS agent can be downloaded from our [packages list](https://packages.wazuh.com/3.x/osx/wazuh-agent-3.12.3-1.pkg).

````
installer -pkg wazuh-agent-3.12.3-1.pkg -target /
````

The registration service requires an SSL certificate on the manager in order to work. This certificate will be automatically generated by the package during the installation if the openssl package is installed. This certificate is stored in */var/ossec/etc/sslmanager.cert*.

If you already have a certificate, you can use them just by copying them into the same path:

````
# cp <ssl_cert> /var/ossec/etc/sslmanager.cert
# cp <ssl_key> /var/ossec/etc/sslmanager.key
````

Otherwise, you can create a self-signed certificate using the following command:

````
# openssl req -x509 -batch -nodes -days 365 -newkey rsa:4096 -out /var/ossec/etc/sslmanager.cert -keyout /var/ossec/etc/sslmanager.key
````

Open a terminal in your MacOS X agent host as root user. After that, you can register the Agent using agent-auth as follows:

To register the Wazuh agent, run the agent-auth utility, using the Wazuh manager’s IP address:

````
# /Library/Ossec/bin/agent-auth -m <MANAGER_IP_ADDRESS>
````

If the new Wazuh agent’s name is not provided, it is set automatically using hostname. To specify the Wazuh agent’s name add -A <agent_name> to the command above.

To enable the communication with the Wazuh manager, edit the Wazuh agent’s configuration file placed at /Library/Ossec/etc/ossec.conf. In the <client><server> section, MANAGER_IP has to be replaced with the Wazuh server’s IP address or the DNS name:

```
<client>
  <server>
    <address>MANAGER_IP</address>
    ...
  </server>
</client>

```

Restart the Wazuh agent:

````
# /Library/Ossec/bin/ossec-control restart
````